devtools::build()
pkg_files = list.files("../",pattern="*.tar.gz",full.names=TRUE)
pkg_files = grep("ePiE",pkg_files,value=TRUE)
print(pkg_files)
print(pkg_files[length(pkg_files)])
install.packages(pkg_files[length(pkg_files)],repos = NULL)
install.packages(pkg_files[length(pkg_files)],repos = NULL)
# SimpleTreat 4.0 in R
# Load ePiE package (install if needed)
library(ePiE)
# Load ePiE example properties (Ibuprofen)
chem = ePiE::LoadExampleChemProperties()
# Complete missing values in chem data
chem = ePiE::CompleteChemProperties(chem = chem)
# This function describes the 6box- and 9box-models of SimpleTreat 4.0 (version 21-07-14)
# --- Required user input - chemical characteristics
#chem_class -- chemical class ("neutral", "acid", or "base")
#MW         -- molecular weight (g/mol)
#Pv         -- vapour pressure (Pa)
#S          -- water solubility (mg/L)
#pKa        -- acid dissociation coefficient (-) - only relevant for acids and bases, otherwise NA
#Kp_ps      -- sorption coefficient to primary sludge (L/kg)
#Kp_as      -- sorption coefficient to activated sludge (L/kg)
#k_bio_WWTP -- biodegration rate constant during CAS (s-1) - assuming degradation only in the aqueous
#phase of activated sludge (chemical absorbed to solids is not available for biodegradation)
# --- Required user input - scenario parameters
#PRIM       -- presence/absence of primary treatment (-1:present; 0:absent)
#SEC        -- presence/absence of secondary treatment (-1:present; 0:absent)
#T_air      -- air temperature (Kelvin)
#Wind       -- wind speed (m/s)
#Inh        -- load entering the WWTP (PE; person equivalents)
#E_rate     -- emission rate of chemical (kg/d)
removal = ePiE::SimpleTreat4_0(chem_class=chem$class[1],MW=chem$MW[1],
Pv=chem$Pv[1],S=chem$S[1],
pKa=chem$pKa[1],Kp_ps=chem$Kp_ps[1],
Kp_as=chem$Kp_as[1],k_bio_WWTP=chem$k_bio_wwtp[1],
T_air=285,Wind=4,
Inh=1000,E_rate=1,
PRIM=-1,SEC=-1)
removal
install.packages("ePiE_1.098.tar.gz",repos = NULL)
library(ePiE)
setwd("Z:/Repositories/ePiEPackage/ePiE/")
if(FALSE){
detach("package:ePiE", unload=TRUE)
remove.packages("ePiE")
devtools::document()
# Load packages
packages = c("Rcpp","fst","glue","leaflet","htmlwidgets","terra","plyr","sp","maptools","stringr")
for(x in packages) usethis::use_package(x, min_version = TRUE)
# add data to pkg
if(FALSE){
# pts and hl
pts = fst::read.fst("inst/basin_db/pts_c75.fst")
hl = fst::read.fst("inst/basin_db/hl_c75.fst")
usethis::use_data(pts, overwrite = TRUE)
usethis::use_data(hl, overwrite = TRUE)
rm(pts)
rm(hl)
# flow
flow_values = readRDS("inst/flow_lt/FLO1k_2000_2015_rastValues.rds")
flow_index = readRDS("inst/flow_lt/FLO1k_2000_2015_rastProperties.rds")
usethis::use_data(flow_values, overwrite = TRUE)
usethis::use_data(flow_index, overwrite = TRUE)
rm(flow_values)
rm(flow_index)
}
usethis::use_build_ignore(c("inst/basin_db", "inst/basin_geo", "inst/cpp", "inst/flow_lt", "inst/pH","inst/win_exec","inst/test_results"))
devtools::document()
